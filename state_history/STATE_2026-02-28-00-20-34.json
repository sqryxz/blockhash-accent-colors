{
  "version": 2,
  "goal": "Build BlockHashAccentColorsSite - derive accent colors from blockchain ledger hash",
  "definition_of_done": [
    "Phase 1: Scaffolding complete",
    "Phase 2: HTML-ledger resolution working",
    "Phase 3: Full fetch→derive→publish cycle working",
    "Phase 4: Website UI complete",
    "Phase 5: Cron cycle wrapper complete",
    "Phase 6: Deploy notes (requires approval)"
  ],
  "constraints": {
    "max_files_changed_per_run": 10,
    "time_budget_minutes": 30,
    "no_deploy_without_approval": true,
    "lock_ttl_seconds": 900,
    "working_directory": "blockhash"
  },
  "backlog": [
    {
      "id": "1.1",
      "title": "Initialize folders and initial state",
      "status": "done",
      "priority": 10,
      "deps": [],
      "evidence": ["Created folders: inputs/, src/, public/ and state_history/"],
      "progress_pct": 100
    },
    {
      "id": "1.2",
      "title": "Write inputs/config.json",
      "status": "done",
      "priority": 10,
      "deps": ["1.1"],
      "evidence": ["Created inputs/config.json with blockchain, color derivation, and output settings"],
      "progress_pct": 100
    },
    {
      "id": "1.3",
      "title": "Create site files skeleton",
      "status": "done",
      "priority": 10,
      "deps": ["1.2"],
      "evidence": ["Created src/index.html, src/style.css, src/app.js with full UI skeleton"],
      "progress_pct": 100
    },
    {
      "id": "2.1",
      "title": "Create fetchBlockchain.js module",
      "status": "done",
      "priority": 9,
      "deps": ["1.3"],
      "evidence": ["Created src/fetchBlockchain.js with loadConfig, fetchLatestBlockHash, fetchBlockByHash, fetchNetworkInfo functions"],
      "progress_pct": 100
    },
    {
      "id": "2.2",
      "title": "Create parseLedger.js module",
      "status": "done",
      "priority": 9,
      "deps": ["2.1"],
      "evidence": ["Created src/parseLedger.js with parseBlockHash, parseBlockArray, normalizeHash, extractBlockMetadata, and parseLedger functions"],
      "progress_pct": 100
    },
    {
      "id": "2.3",
      "title": "Create deriveColors.js module",
      "status": "done",
      "priority": 9,
      "deps": ["2.2"],
      "evidence": ["Created src/deriveColors.js with loadConfig, sha256, hexToHsl, deriveColors, and generateCssVariables functions"],
      "progress_pct": 100
    },
    {
      "id": "2.4",
      "title": "Create main.js orchestrator",
      "status": "done",
      "priority": 8,
      "deps": ["2.3"],
      "evidence": ["Created src/main.js orchestrator with initModules, runPipeline, updateDisplay, and getStatus functions"],
      "progress_pct": 100
    },
    {
      "id": "2.5",
      "title": "Test fetch→derive pipeline locally",
      "status": "done",
      "priority": 8,
      "deps": ["2.4"],
      "evidence": [
        "Created test_pipeline.js to run pipeline in Node.js",
        "Updated modules to support both browser and Node.js environments",
        "Pipeline test successful: fetched Bitcoin block hash, derived 6-color palette",
        "Primary color: #d14264, Accent color: #42d1b0"
      ],
      "progress_pct": 100
    },
    {
      "id": "3.0",
      "title": "Break down Phase 3 into parallel subtasks",
      "status": "done",
      "priority": 8,
      "deps": ["2.5"],
      "evidence": [
        "Split Phase 3 into 5 parallelizable subtasks:",
        "- 3.1: Create publish.js module (file output handler)",
        "- 3.1a: Add JSON output format support",
        "- 3.1b: Add CSS variables output format",
        "- 3.2: Integrate fetch→parse→derive→publish cycle",
        "- 3.2a: Add error handling and retry logic"
      ],
      "progress_pct": 100
    },
    {
      "id": "3.1",
      "title": "Create publish.js module (file output handler)",
      "status": "done",
      "priority": 7,
      "deps": ["3.0"],
      "evidence": [
        "Created src/publish.js with loadConfig, generateCssVariables, generateJsonOutput, generateHtmlPreview, publishToFile, publishForBrowser, and publish functions",
        "Supports both Node.js (file output) and browser (embedded output) environments",
        "Outputs CSS variables, JSON data, and HTML preview snippets"
      ],
      "progress_pct": 100
    },
    {
      "id": "3.1a",
      "title": "Add JSON output format to publish.js",
      "status": "done",
      "priority": 7,
      "deps": ["3.1"],
      "evidence": ["generateJsonOutput function creates structured JSON with primary, accent, and full palette data"],
      "progress_pct": 100
    },
    {
      "id": "3.1b",
      "title": "Add CSS variables output format to publish.js",
      "status": "done",
      "priority": 7,
      "deps": ["3.1"],
      "evidence": ["generateCssVariables function creates CSS custom properties with hex, hsl, and css values"],
      "progress_pct": 100
    },
    {
      "id": "3.2",
      "title": "Integrate fetch→parse→derive→publish cycle",
      "status": "in_progress",
      "priority": 7,
      "deps": ["3.1a", "3.1b"],
      "evidence": [],
      "progress_pct": 0
    },
    {
      "id": "3.3",
      "title": "Create public/outputs folder structure",
      "status": "done",
      "priority": 6,
      "deps": [],
      "evidence": ["Created folder structure: public/outputs/css/, public/outputs/json/, public/outputs/history/"],
      "progress_pct": 100
    },
    {
      "id": "3.4",
      "title": "Write README.md with usage instructions",
      "status": "ready",
      "priority": 5,
      "deps": [],
      "evidence": [],
      "progress_pct": 0
    },
    {
      "id": "4.0",
      "title": "Break down Phase 4 into subtasks",
      "status": "ready",
      "priority": 6,
      "deps": [],
      "evidence": [],
      "progress_pct": 0
    },
    {
      "id": "3.2a",
      "title": "Add error handling and retry logic",
      "status": "pending",
      "priority": 6,
      "deps": ["3.2"],
      "evidence": [],
      "progress_pct": 0
    },
    {
      "id": "4.1",
      "title": "Enhance UI with live color display",
      "status": "pending",
      "priority": 6,
      "deps": ["3.2a"],
      "evidence": [],
      "progress_pct": 0
    },
    {
      "id": "5.1",
      "title": "Create cron wrapper script",
      "status": "pending",
      "priority": 5,
      "deps": ["4.1"],
      "evidence": [],
      "progress_pct": 0
    },
    {
      "id": "6.1",
      "title": "Write deployment documentation",
      "status": "pending",
      "priority": 4,
      "deps": ["5.1"],
      "evidence": [],
      "progress_pct": 0,
      "requires_approval": true
    }
  ],
  "next_actions": [
    {
      "id": "3.2",
      "status": "in_progress"
    },
    {
      "id": "3.4",
      "status": "ready"
    },
    {
      "id": "4.0",
      "status": "ready"
    },
    {
      "id": "3.2a",
      "status": "pending"
    }
  ],
  "decisions_policy": {
    "must_ask_if": ["deploy_or_publish_external", "spend_money", "delete_files"],
    "can_decide_if": ["purely_local_refactor_small", "add_small_copy_placeholders", "add_tests_or_linting_locally"]
  },
  "decisions": [],
  "artifacts": [],
  "rollback_to": null,
  "last_run": "2026-02-28T00:20:00.000Z",
  "context": {
    "requires_approval": false,
    "last_latest_ledger_url": "https://blockstream.info/api/blocks",
    "last_hash": "00000000000000000000214170d14a37e7f0d2857e69c6204379b2fe89ca50b1",
    "last_accents": {
      "primary": "#d14264",
      "accent": "#42d1b0",
      "palette": ["#d14264", "#894ae8", "#e9b572", "#1329cd", "#7882e3", "#ae3429"]
    }
  }
}